{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-feedback.js"],"sourcesContent":["import throttle from \"lodash.throttle\";\n\nconst STORAGE_KEY = \"feedback-form-state\";\nlet formData = {};\n\nfunction onSubmit(ev) {\n  ev.preventDefault();\n\n  const input = document.querySelector(\".feedback-form input\");\n  const textarea = document.querySelector(\".feedback-form textarea\");\n\n  if (textarea.value.trim() === \"\" || input.value.trim() === \"\") {\n    return alert(\"Plz, fill all fields!\");\n  }\n\n  console.log(formData);\n\n  ev.currentTarget.reset();\n  localStorage.removeItem(STORAGE_KEY);\n  formData = {};\n}\n\nfunction onInput(ev) {\n  formData[ev.target.name] = ev.target.value;\n  localStorage.setItem(STORAGE_KEY, JSON.stringify(formData));\n}\n\nfunction prefillFormData() {\n  const input = document.querySelector(\".feedback-form input\");\n  const textarea = document.querySelector(\".feedback-form textarea\");\n  const storageValue = localStorage.getItem(STORAGE_KEY);\n  const savedData = storageValue ? JSON.parse(storageValue) : {};\n\n  if (savedData.email) {\n    input.value = savedData.email;\n    formData.email = savedData.email;\n  }\n\n  if (savedData.message) {\n    textarea.value = savedData.message;\n    formData.message = savedData.message;\n  }\n}\n\n(() => {\n  const form = document.querySelector(\".feedback-form\");\n\n  prefillFormData();\n\n  form.addEventListener(\"input\", throttle(onInput, 500));\n  form.addEventListener(\"submit\", onSubmit);\n})();"],"names":["STORAGE_KEY","formData","onSubmit","ev","input","onInput","prefillFormData","textarea","storageValue","savedData","form","throttle"],"mappings":"wIAEA,MAAMA,EAAc,sBACpB,IAAIC,EAAW,CAAA,EAEf,SAASC,EAASC,EAAI,CACpBA,EAAG,eAAc,EAEjB,MAAMC,EAAQ,SAAS,cAAc,sBAAsB,EAG3D,GAFiB,SAAS,cAAc,yBAAyB,EAEpD,MAAM,SAAW,IAAMA,EAAM,MAAM,KAAM,IAAK,GACzD,OAAO,MAAM,uBAAuB,EAGtC,QAAQ,IAAIH,CAAQ,EAEpBE,EAAG,cAAc,QACjB,aAAa,WAAWH,CAAW,EACnCC,EAAW,CAAA,CACb,CAEA,SAASI,EAAQF,EAAI,CACnBF,EAASE,EAAG,OAAO,IAAI,EAAIA,EAAG,OAAO,MACrC,aAAa,QAAQH,EAAa,KAAK,UAAUC,CAAQ,CAAC,CAC5D,CAEA,SAASK,GAAkB,CACzB,MAAMF,EAAQ,SAAS,cAAc,sBAAsB,EACrDG,EAAW,SAAS,cAAc,yBAAyB,EAC3DC,EAAe,aAAa,QAAQR,CAAW,EAC/CS,EAAYD,EAAe,KAAK,MAAMA,CAAY,EAAI,GAExDC,EAAU,QACZL,EAAM,MAAQK,EAAU,MACxBR,EAAS,MAAQQ,EAAU,OAGzBA,EAAU,UACZF,EAAS,MAAQE,EAAU,QAC3BR,EAAS,QAAUQ,EAAU,QAEjC,EAEC,IAAM,CACL,MAAMC,EAAO,SAAS,cAAc,gBAAgB,EAEpDJ,IAEAI,EAAK,iBAAiB,QAASC,EAASN,EAAS,GAAG,CAAC,EACrDK,EAAK,iBAAiB,SAAUR,CAAQ,CAC1C,GAAI"}